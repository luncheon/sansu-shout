var e,t=Object.defineProperty,n=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,n,s)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,c=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(e,n,t[n]);if(r)for(var n of r(t))i.call(t,n)&&l(e,n,t[n]);return e},a=(e,t)=>n(e,s(t));import{t as u,i as d,c as p,a as f,b,r as h,d as x,e as v,m,f as y,g as w}from"./vendor.ea708035.js";const g=u('<div class="flex items-center justify-center whitespace-pre"><span></span><span class="w-2ex"></span></div>'),j=e=>Math.random()*e|0,S=e=>0===e?"ゼロ":e,$=[()=>{const e=j(20),t=j(20);return{x:e,y:t,correctAnswer:e+t,text:`${e} + ${t} = `,speech:`${S(e)}たす${S(t)}は?`}},()=>{let e=j(20),t=j(20);return e<t&&([e,t]=[t,e]),{x:e,y:t,correctAnswer:e-t,text:`${e} - ${t} = `,speech:`${S(e)}ひく${S(t)}は?`}}],O=()=>$[Math.random()*$.length|0](),k=e=>(()=>{const t=g.cloneNode(!0),n=t.firstChild,s=n.nextSibling;return d(n,(()=>e.question.text)),d(s,(()=>e.answer)),t})(),N=e=>{var t;const n=e&&(null==(t=e.match(/(-?[0-9]+)[^0-9]*$/))?void 0:t[1]);return n?+n:void 0};const T=u('<main class="relative flex-auto flex items-center justify-center text-12vw"><div class="absolute inset-0 flex items-center justify-center text-24vw pointer-events-none select-none">⭕️</div></main>'),P=u('<div class="fixed left-4 bottom-3 font-sans"><div class="font-bold text-xs opacity-60 mb-1">きこえた ことば</div><span class="text-red-400"></span></div>'),A=u('<button class="fixed right-4 bottom-2 p-0 text-xs opacity-60 border-b-current border-b-1 font-sans" type="button">マイクリセット</button>'),C=u('<header class="pl-4 pt-3 self-start inline-flex flex-col items-center"><h1><span class="text-pink-200">さんすう</span><span class="text-yellow-100">シャウト</span></h1><p class="text-green-100" style="letter-spacing:1px">こたえが わかったら さけんでね</p></header>'),R=u('<div class="h-full flex flex-col items-stretch"></div>'),U=u('<main class="flex-auto flex items-center justify-center text-12vw"><button class="border-b-current border-b-3" type="button">はじめる</button></main>'),[q,I]=p(O()),[M,D]=p(),[E,F]=p(""),[z,B]=p(),[G,H]=p(),J=f((()=>z()===q().correctAnswer)),K=Object.assign;let L;const Q=K(new(null!=(e=window.SpeechRecognition)?e:window.webkitSpeechRecognition),{lang:"ja",continuous:!0,interimResults:!0,maxAlternatives:1,onend:()=>D(!1),onaudiostart:()=>b((()=>{D(!0),F(""),H()})),onaudioend:()=>D(!1),onerror:e=>{H([e.error,e.message]),setTimeout(V,1e3)},onresult:({results:e,resultIndex:t})=>{var n,s;const r=e[t],o=null!=(s=null==(n=null==r?void 0:r[0])?void 0:n.transcript)?s:"";clearTimeout(L),(null==r?void 0:r.isFinal)?b((()=>{var e;F(o),B(null!=(e=N(o))?e:null)})):(F(o),L=setTimeout((()=>B(N(o))),1e3))}}),V=()=>{F(""),B(),H(),Q.stop(),setTimeout((()=>Q.start()))},W=()=>{const e=()=>Q.start(),t={lang:"ja",rate:1.25,pitch:1.1},n=K(new SpeechSynthesisUtterance,a(c({},t),{onend:e})),s=K(new SpeechSynthesisUtterance("正解"),t),r=K(new SpeechSynthesisUtterance("ちがうよ?"),a(c({},t),{onend:e}));return y((()=>{n.text=q().speech,speechSynthesis.speak(n)})),y((()=>{if(void 0!==z()){if(null===z())return e();Q.stop(),J()?(speechSynthesis.speak(s),setTimeout((()=>{b((()=>{B(void 0),I(O())}))}),1e3)):(speechSynthesis.speak(r),setTimeout((()=>B(void 0)),1e3))}})),[(()=>{const e=T.cloneNode(!0),t=e.firstChild;return d(e,v(k,{get question(){return q()},get answer(){var e;return null!=(e=z())?e:void 0}}),t),w((()=>t.hidden=!J())),e})(),(()=>{const e=P.cloneNode(!0),t=e.firstChild.nextSibling;return d(e,E,t),d(e,(()=>M()?"...":"　"),t),d(t,G),e})(),(()=>{const e=A.cloneNode(!0);return e.$$click=V,e})()]},X=()=>C.cloneNode(!0),Y=()=>{const[e,t]=p(!1);return(()=>{const n=R.cloneNode(!0);return d(n,v(X,{}),null),d(n,(()=>{const n=m((()=>!!e()),!0);return()=>n()?v(W,{}):(()=>{const e=U.cloneNode(!0);return e.firstChild.$$click=()=>t(!0),e})()})(),null),n})()};h((()=>v(Y,{})),document.body),x(["click"]);
